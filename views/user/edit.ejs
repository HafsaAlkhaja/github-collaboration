<%- include('../stylingpath/styles', { cssFile: '/css/Edit.css' }) %>
<form method="POST" action="/user/update" enctype="multipart/form-data" class="edit-form">
  <div>
    <label for="avatarInput">
      <img id="avatarPreview" class="avatar" src="<%= user.avatar %>" alt="Profile Avatar">
    </label>
    <input type="file" id="avatarInput" name="avatar" accept="image/*" onchange="previewAvatar()">
  </div>
  <div class="form-content">
    <div>
      <label>Name</label>
      <input type="text" name="name" class="form-control" value="<%= user.name %>" />
    </div>
    <div>
      <label>Email Address</label>
      <input type="text" name="email" class="form-control" value="<%= user.email %>" />
    </div>
    <div>
      <label>Weight</label>
      <input type=Number name="weight" class="form-control" value="<%= user.weight %>" />
    </div>
    <div>
      <label>height</label>
      <input type=Number name="height" class="form-control" value="<%= user.height %>" />
    </div>
    <div>
      <label>Medical condition *if needed* </label>
      <input type="text" name="medical" class="form-control" value="<%= user.medical %>" />
    </div>
    <div>
      <label>Let us know what is your goal</label>
      <input type="text" name="goal" class="form-control" value="<%= user.goal %>" />
    </div>
    <br>
  <div class="button-container">
    <button type="submit" class="Btn">Update</button>
    <button onclick="return confirm('Are you sure you want to delete your profile?');">
      <a href="/user/delete?id=<%= user._id %>">Delete Profile</a>
    </button>
  </div>
  </div>
</form>
<script>
  function previewAvatar() {
    const fileInput = document.getElementById('avatarInput');
    const avatarPreview = document.getElementById('avatarPreview');

    const file = fileInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        avatarPreview.src = e.target.result;
      };
      reader.readAsDataURL(file); // Convert the file to a data URL
    }
  }
</script>